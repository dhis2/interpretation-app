language: node_js
node_js:
- '8'
before_script:
- npm install --global @dhis2/deploy-build
script:
- npm run build
deploy:
- provider: script
  script: deploy-build
  skip_cleanup: true
  on:
    all_branches: true
- provider: script
  script: publish-build
  skip_cleanup: true
  on:
    tags: true
notifications:
  slack:
    secure: WdXbIGwUMzGp2O2m+EmeMy+CrCr3cOkkQU7UW9Q5dAORJl9L5FdxDA04C+NjDCwLyKnpFBR1uassTRG9opBn6rI6adAuAAPInoo7zCK4H8nCVvLsHfllOZOdZt85y5JXLDY+XIkmdg8QaX9MTf0r+oOzDnUikemWsLLgeHOtgkaqw4wq+x2CYYEr6k3lwhuZIHWe0t18xTnkRSKfFw69BoIa7GibL2+7tn3wXBtpHXN01dHkoU9vSqtJ5sYBvz/udGfvIRDU0hACKwnbXdnM6qcfU4pMKYp0pUM64AH9AjLSR0GKrENrCJYGAMNttDFOxZ5hcqF4wFop0Qg1e/gWGMoqwEBejUrlBj2p1okyjeag+NJinwoSDqqJm/1jumyfHUCf4hOfE3Lz6FKnbkegnI4DGxzN6JVUvzMwjRF7A3l9buEC3GYDjbkD0BT0+rdeQIy6rxyeD72Vwe6dw/EZXtozhGWMvdW5Qdzft3SIdGOIuJv73FiL5v40mpQYeJ9Hhg4fM/l30H/QQVWbPoiRn4oJQGD10Sj+c82bMgMfqX537OcTYTO/ntiP9GDby/jFgDf9ttxXC3yEKuGZC+deQJBz9Tu+ErDpewRUg/Kv3z/skVcyOtdUin0/8yejCH+AttwzJETBmOI0hQlr3VBeSSpvF5JL6Dz/25okajrYUN0=
    on_success: change
    on_failure: always
env:
  global:
    secure: iIlsM4vZbq5tZXaepvbwnmMjeUuDnV58hjBOMIYEqzlgf89Fw/9szNWiYIhvl7SsdVPXKlQbGLGp41SIVTUBHsygsb3BAOvLCkOto8aSNbF4BfTiAePunXzQH76XaAIjgMS54a3EpwJkXxWE3da0jtxaxHkth+bdmDpOdPlpB9Eo3bB2dVoLFfZOeRli4dxip5MA1+J983rV0MfF2VgNg+kz9V6hmBMitRdyCITe2WiMNSpMNzspa2HmeVKrF9e0OAFg96P+yEDSJodaCD7sKtvU41tAVuClRrYymQY5afsDcIBUaSCnu6K9nKjlXjyrM1e5eCTw6d8bAy9BtId4JP+ZwlK/ptUIjMzctSTa+t0wJOWD0hNQLso7W51z5QIZZE1Ql451lHL90z2X2FyumoZUFos4DLrKoZ7p+g3aaa0J9WqWSmqGGrW+aoBh0Rk4H/nLOdZgC3hcUnW9qbokHz2MeqdbVncj9gUZFH4GufDiZ6kvG+fCheH77pwNjY43Fs6lmPmjCaB2ng9wVUKgrCpJv3pmjYcKEI+rj4rQFOgs9wQen/P2sNTr/8e1eXt01/64RrmToEcl+3JvnwS7sMYZXzWt+AlCb4RtxPSE+Eok12CxW8dn8ATKIS2N7hc0zNyghBPirAvDzUma77O9rL0fSuvSAxqSNa9U2eO9RNA=
